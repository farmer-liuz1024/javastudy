
## MongoDB

**MongoDB简介**

MongoDB是一种基于**分布式文件存储**的NoSQL数据库。由C++语言编写。旨在为WEB英语提供可扩展的高性能数据存储方案。<br/>
MongoDB是一个介于关系型数据库和非关系型数据之间的产品，是非关系型数据库当中功能最丰富，最像关系型数据的。

**MongoDB特点**

- 模式自由：可以把不同结构的文档存储到同一个数据库中。
- 面向集合的存储：适合存储JSON风格文件的形式。
- 完整的索引支持：对任何属性可索引。
- 自动分片：支持云级别的伸缩，自动分片功能支持水平的数据库集群，可动态添加额外的机器。
- 高效的传统存储方式：支持二进制数据及大对象（图片等）。
- 丰富的查询功能：支持丰富的查询方式，支持使用JSON形式，可以轻易的查询文档中嵌套（内嵌）的对象或数据。
- 复制性高可用性：支持服务器之间的数据复制，支持主从模式及服务器之间的相互复制，复制的主要目的是提供冗余及自动故障转移。
- 快速的更新操作：查询优化器会分析查询表达式，并生成一个高效的查询计划。

根据DB-Engine-Ranking的排名统计截止到2021年-9月Mongodb排名第五，见截图：

![avatar](../../../../media/pictures/Mongdb-Rank.png)

## NOSQL

**什么是NOSQL**

NOSQL(NOSQL=Not Only SQL),即不仅仅是SQL，是指非关系型数据库，是对于不同传统关系型数据库的统称。

**关系型数据库的瓶颈**

- 关系型数据库具有不错的稳定性，高性能，使用简答，功能强大，历史悠久，并且有很多成功的案例。
- 在互联网领域，Mysql成为了绝对的王者，毫不夸张的说，MySQL为互联网的发展做出了卓越的贡献。
- 随着时代的发展电商的发展引领了WEB时代的潮流，导致流量一下增大到无法想象的地方。

**缓存+MySQL数据库**

- 随着访问量的增加，使用MySQL的网站基本上都出现了性能的问题，为了追求极值的性能，采用了缓存技术来环节流量高峰数据库的压力。

**MySQL主从读写分离**

由于数据写入的压力增加，（缓存只能解决读取的压力）。未做读写分离的数据库会频繁的引发告警例如cpu、内存或IO异常。所有后来技术架构演进到
读写分离技术，Mysql的master-slave可实现主从复制功能，读写分离中间件可使用MySQL-Proxy、MyCat、sharding-jdbc等等，这里我们不做详细介绍。

**NOSQL优势**

****易扩展****

NOSQL数据库去掉了数据库关联关系的特性，数据之间无关联关系，这就就非常容易扩展字段（新增字段）

****大数据高性能****

在大数据量的情况下，NOSQL数据库都具有非常高的读写性能，这取决于它无关联关系特性。


****灵活的数据模型****

NOSQL无需提前为存储的字段建立字段，可随时存储自定义的字段内容。而关系型数据库在新增或删除字段是一件非常麻烦的事情。如果数据量非常大的情况下，简直就是噩梦。
（PS:笔者曾经给2000w的mysql表新增了一个字段，我记得当时耗时2小时。）

****高性能****

NOSQL在不影响性能的情况下，就可以实现高可用的架构。

****NOSQl适用场景****
1. 简单的数据模型
2. 对数据库性能要求高
3. 不需要高度的数据一致性
4. 容易扩展字段

## MongoDB适用场景

MongoDB是一个可扩展的高性能、开源、面向文档的数据。

**适用场景**

- 网站数据：实时的插入、删除、更新、查询，以及数据的复制性和高度伸缩性
- 缓存：由于高性能，适合作为系统的缓存层，在系统异常重启后缓存可以缓解数据库的压力
- 廉价的存储成本：使用传统型数据库存储数据的成本会比较高
- 高伸缩的场景：非常适合集群模式下组成的数据库，可随时新增节点
- 用于对象及JSON的数据存储：MongDB的BSON数据格式存储非常适合文档格式的存储及查询

**不适用场景**

- 高度的事务系统：例如银行系统、会计系统，对事务要求比较高
- 传统的商业智能系统：会产生高度的sql查询功能，对于这种业务数仓数据库会比较适合

## 高级操作











